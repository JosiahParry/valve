<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="valve">
<title>Deploy with DigitalOcean • valve</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Noto_Sans_Display-0.4.5/font.css" rel="stylesheet">
<link href="../deps/IBM_Plex_Mono-0.4.5/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Deploy with DigitalOcean">
<meta property="og:description" content="valve">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">valve</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Deploy-with-DigitalOcean.html">Deploy with DigitalOcean</a>
    <a class="dropdown-item" href="../articles/Using-Valve-with-Docker.html">Using Valve with Docker</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/JosiahParry/valve/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Deploy with DigitalOcean</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JosiahParry/valve/blob/HEAD/vignettes/articles/Deploy-with-DigitalOcean.Rmd" class="external-link"><code>vignettes/articles/Deploy-with-DigitalOcean.Rmd</code></a></small>
      <div class="d-none name"><code>Deploy-with-DigitalOcean.Rmd</code></div>
    </div>

    
    
<p><a href="https://www.digitalocean.com/" class="external-link">DigitalOcean</a> is a simple
web-services hosting site. Compared to AWS, GCP, and Azure, getting a
service up and running on DigitalOcean is a breeze!</p>
<p>A live example of a Valve app hosted on DigitalOcean be <a href="https://plankton-app-ozvgy.ondigitalocean.app" class="external-link">accessed
here</a>.</p>
<p>To deploy a Valve app to DigitalOcean we need first make our app into
a Docker-based service. See <a href="https://valve.josiahparry.com/articles/using-valve-with-docker" class="external-link">Using
Valve with Docker</a> for creating an appropriate Dockerfile. The source
code for the above example can be found in the <a href="https://github.com/JosiahParry/valve/tree/main/inst/docker" class="external-link"><code>/inst/docker</code>
folder</a>.</p>
<div class="section level2">
<h2 id="building-docker-image">Building Docker Image<a class="anchor" aria-label="anchor" href="#building-docker-image"></a>
</h2>
<p>Always get the tough part out of the way first. In this case, that is
building the Docker image. First, make sure that you have an account at
<a href="https://www.hub.docker.com" class="external-link">Docker Hub</a>. Ensure that you
have <a href="https://www.docker.com/products/docker-desktop/" class="external-link">Docker
desktop</a> installed—it makes the process a bit easier.</p>
<p>Navigate to the directory that has your <code>Dockerfile</code>. We
will build the Docker image with the following naming convention
<code>{username}/{image-name}:{tag}</code>. Following this convention
will make it a bit easier.</p>
<pre class="shell"><code>docker build -t ${USERNAME}/${IMAGE}:${VERSION} .
docker tag ${USERNAME}/${IMAGE}:${VERSION} ${USERNAME}/${IMAGE}:latest</code></pre>
<p>In my case I ran the below to create an image under my username
<code>josiahparry</code> with the image name <code>valve</code> and the
tag <code>stable</code>. The <code>.</code> is important, because it
tells us that we’re building the Dockerfile in the current directory.
Afterwards, we tag that newly built image with the <code>latest</code>
tag. This build process can take a few minutes. Go fold some laundry,
wash some dishses, whatever might make you feel like you’re being
productive during this time.</p>
<pre class="shell"><code>docker build -t josiahparry/valve:stable .
docker tag josiahparry/valve:stable valve:latest</code></pre>
<p>If you are using a Mac M1 or M2 chip / an arm-based machine, you’ll
need to build specifically for <code>amd64</code>. This is what I have
to use for my Mac M1.</p>
<pre class="shell"><code>docker buildx build --platform=linux/amd64 -t josiahparry/valve:latest .</code></pre>
</div>
<div class="section level2">
<h2 id="publishing-to-docker-hub">Publishing to Docker Hub<a class="anchor" aria-label="anchor" href="#publishing-to-docker-hub"></a>
</h2>
<p>Open Docker Desktop. From there, <a href="https://docs.docker.com/desktop/get-started/#learning-center" class="external-link">sign
into Docker Hub</a> by pressing the <code>Sign In</code> button on the
top right.</p>
<p><img src="https://docs.docker.com/desktop/images/learning-center.png"></p>
<p>Now that you are signed in to the app, we can <a href="https://docs.docker.com/get-started/publish-your-own-image/#step-4-push-your-image-to-docker-hub" class="external-link">publish
directly to Docker Hub</a>. Find the image you build in the images
section. Click the three dots for more menu options.</p>
<p><img src="https://docs.docker.com/get-started/images/getting-started-push.gif"></p>
</div>
<div class="section level2">
<h2 id="deploying-with-digitalocean">Deploying with DigitalOcean<a class="anchor" aria-label="anchor" href="#deploying-with-digitalocean"></a>
</h2>
<p>Now that you have pushed your image to Docker Hub, we can easily
deploy the application using DigitalOcean. Navigate to <a href="https://cloud.digitalocean.com" class="external-link uri">https://cloud.digitalocean.com</a> and create an
account.</p>
<p>From the cloud console we will start by creating a project.</p>
<p><img src="do-images/create-project.png"></p>
<p>Ensure that the project is a <code>Web Application</code>. After you
have created your project, we will need to create an application inside
of the project. Navigate to the <code>Create</code> button drop-down and
select <code>App</code>.</p>
<p><img src="do-images/create-app.png"></p>
<p>Now, choose <code>Docker Hub</code> in the
<code>Create Resource from Source Code</code> menu option. Under
repository, provide the name of your Docker image which follows the
patter <code>username/image</code>. In my case, that is
<code>josiahparry/valve</code>. You also have the option to provide a
specific tag to be used. Otherwise, the <code>latest</code> tag will be
used.</p>
<p><img src="do-images/create-resource.png"></p>
<p>Press <code>Next</code> to continue. Now we need to edit the
application to use the correct port. This will be the port that is used
by Valve in your <code>Dockerfile</code>. The example Dockerfile uses
port <code>8000</code>, so we need to change that.</p>
<p><img src="do-images/edit-resource.png"></p>
<p>Change the <code>HTTP Port</code> to the correct port that is used by
Valve. In my case, that is 8000.</p>
<p><img src="do-images/change-port.png"></p>
<p>Press <code>Back</code> to continue in the process.</p>
<p>Press <code>Edit Plan</code> to specify the size of the images you
want to use. In my case, I want to use a smaller and cheaper one. I’d
recommend to start as small as possible and monitor the behavior and CPU
usage before increasing the size of your images. Don’t pay for what
you’re not using!</p>
<p><img src="do-images/change-plan.png"></p>
<p>After you have chosen the appropriate plan, go to <code>Review</code>
and press <code>Create Resource</code>. If, you are in review and you
see the option to modify your plan press <code>Back</code>. You will
then be able to create your resource.</p>
<p>Your app will now be built and deployed!</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Josiah Parry.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
