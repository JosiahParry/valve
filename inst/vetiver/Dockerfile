# Generated by the vetiver package; edit with care

FROM rocker/r-ver:4.3.0
ENV RENV_CONFIG_REPOS_OVERRIDE https://packagemanager.rstudio.com/cran/latest

RUN apt-get update -qq && apt-get install -y --no-install-recommends \
  libcurl4-openssl-dev \
  libicu-dev \
  libsodium-dev \
  libssl-dev \
  make \
  zlib1g-dev \
  && apt-get clean

COPY vetiver_renv.lock renv.lock
RUN Rscript -e "install.packages('renv')"
RUN Rscript -e "renv::restore()"
RUN Rscript -e "install.packages('remotes')"
RUN echo 'stop ittt'
RUN Rscript -e "remotes::install_github('josiahparry/valve')"
RUN export VALVE=$(Rscript -e "cat(system.file('valve', package = 'valve'))")

COPY $VALVE /app


EXPOSE 3000
RUN echo $VALVE
#ENTRYPOINT ["/app/valve"]
#ARG APP_NAME=app.jar                    # $APP_NAME can be ARG or ENV type.
#ENV APP_PATH=app-directory/$APP_NAME    # $APP_PATH must be ENV type.
#ENTRYPOINT java -jar $APP_PATH
#ENV EXE=$VALVE
# Build a shell script
# Run the generated shell script.
#ENTRYPOINT ./$EXE


